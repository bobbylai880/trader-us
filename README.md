# AI Trader Assist

> **è‡ªé€‚åº”ç¾è‚¡é‡åŒ–äº¤æ˜“ç³»ç»Ÿ** â€” åŸºäºå¸‚åœºçŠ¶æ€è¯†åˆ«çš„å¤šç­–ç•¥åˆ‡æ¢å¼•æ“ + åˆ†å±‚å†³ç­–æ¡†æ¶

[![Python 3.12](https://img.shields.io/badge/Python-3.12-blue.svg)](https://www.python.org/)
[![PostgreSQL 18](https://img.shields.io/badge/PostgreSQL-18-336791.svg)](https://www.postgresql.org/)
[![3Y Backtest](https://img.shields.io/badge/3Y%20Return-+90.43%25-brightgreen.svg)](#å›æµ‹éªŒè¯)
[![Sharpe Ratio](https://img.shields.io/badge/Sharpe-1.43-blue.svg)](#å›æµ‹éªŒè¯)
[![Max Drawdown](https://img.shields.io/badge/MaxDD-12.56%25-orange.svg)](#å›æµ‹éªŒè¯)

**3å¹´å›æµ‹æˆæœ (2023-2026)**: æ”¶ç›Šç‡ **+90.43%** (vs SPY +81.62%)ï¼Œå¤æ™®æ¯”ç‡ **1.43**ï¼Œæœ€å¤§å›æ’¤ **12.56%**

---

## ç›®å½•

- [ç³»ç»Ÿç‰¹æ€§](#ç³»ç»Ÿç‰¹æ€§)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [ç³»ç»Ÿæ¶æ„](#ç³»ç»Ÿæ¶æ„)
- [ç­–ç•¥æ¼”è¿›](#ç­–ç•¥æ¼”è¿›)
- [å›æµ‹éªŒè¯](#å›æµ‹éªŒè¯)
- [é…ç½®è¯´æ˜](#é…ç½®è¯´æ˜)
- [å¼€å‘æŒ‡å—](#å¼€å‘æŒ‡å—)

---

## ç³»ç»Ÿç‰¹æ€§

### æ ¸å¿ƒèƒ½åŠ›

| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| **å¸‚åœºçŠ¶æ€è¯†åˆ«** | 3ç§å¸‚åœºçŠ¶æ€è‡ªåŠ¨è¯†åˆ« (Offensive/Neutral/Defensive) |
| **åˆ†å±‚å†³ç­–æ¡†æ¶** | å®è§‚è¶‹åŠ¿(æœˆåº¦) â†’ æ¿å—è½®åŠ¨(åŒå‘¨) â†’ ä¸ªè‚¡ç²¾é€‰ |
| **ç§‘æŠ€é¾™å¤´èšç„¦** | Offensive æ¨¡å¼ä¼˜å…ˆé…ç½® NVDA/META/GOOGL/AMZN ç­‰ |
| **PostgreSQL 18** | é«˜æ€§èƒ½æ•°æ®å­˜å‚¨ï¼Œæ”¯æŒ 84,590+ è¡Œæ—¥çº¿æ•°æ® |
| **LLM åˆ†æ** | DeepSeek 5é˜¶æ®µæ¨ç†æµæ°´çº¿ |

### V5 èåˆç­–ç•¥ç‰¹ç‚¹

| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| ğŸš€ **æ”¾å®½è¿›æ”»é˜ˆå€¼** | score â‰¥ 2 å³è¿›å…¥ Offensive æ¨¡å¼ (81% æ—¶é—´) |
| ğŸ“… **åŒå‘¨æ¿å—è½®åŠ¨** | å‡å°‘é¢‘ç¹äº¤æ˜“ï¼Œé™ä½äº¤æ˜“æˆæœ¬ |
| ğŸ“ˆ **å®½æ¾æ­¢æŸ 18%** | è®©åˆ©æ¶¦å……åˆ†å¥”è·‘ï¼Œç¦ç”¨æ­¢ç›ˆ |
| ğŸ¯ **ç§‘æŠ€é¾™å¤´ä¼˜å…ˆ** | Offensive æ¨¡å¼èšç„¦ 10 åªç§‘æŠ€é¾™å¤´ |

---

## å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/your-repo/trader.git
cd trader

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3 -m venv .venv
source .venv/bin/activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

```bash
# å¤åˆ¶é…ç½®æ¨¡æ¿
cp .env.example .env

# ç¼–è¾‘ .env å¡«å…¥é…ç½®
```

**.env é…ç½®é¡¹**:

```bash
# PostgreSQL æ•°æ®åº“
PG_HOST=localhost
PG_PORT=5432
PG_DATABASE=trader
PG_USER=trader
PG_PASSWORD=your_password_here

# DeepSeek LLM
DEEPSEEK_API_KEY=your_api_key_here

# FRED å®è§‚æ•°æ® (å¯é€‰)
FRED_API_KEY=your_fred_api_key_here
```

### 3. åˆå§‹åŒ–æ•°æ®åº“

```bash
# åˆ›å»º PostgreSQL 18 Schema
psql -h localhost -U trader -d trader -f scripts/init_pg18_schema.sql

# å¯¼å…¥å†å²æ•°æ® (3å¹´)
PYTHONPATH=. python scripts/load_historical_data.py --years 3
```

### 4. è¿è¡Œå›æµ‹

```bash
# V5 èåˆç­–ç•¥å›æµ‹ (æ¨è)
PYTHONPATH=. python scripts/run_backtest_v5.py

# V3 è¶‹åŠ¿è·Ÿè¸ªå›æµ‹
PYTHONPATH=. python scripts/run_backtest_v3.py

# V4 åˆ†å±‚å†³ç­–å›æµ‹
PYTHONPATH=. python scripts/run_backtest_v4.py
```

---

## ç³»ç»Ÿæ¶æ„

### V5 åˆ†å±‚å†³ç­–æ¡†æ¶

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¬¬ä¸€å±‚: å®è§‚è¶‹åŠ¿ (æœˆåº¦å›é¡¾)                                    â”‚
â”‚   - VIX æ°´å¹³ä¸è¶‹åŠ¿ (é˜ˆå€¼æ”¾å®½: <18 è´ªå©ª, <22 æ­£å¸¸)              â”‚
â”‚   - SPY åŠ¨é‡ + SMA50 ä½ç½®                                    â”‚
â”‚   - æ–°é—»æƒ…ç»ªèšåˆ                                              â”‚
â”‚   â†’ è¾“å‡º: å¸‚åœºå€¾å‘ (Offensive/Neutral/Defensive) + ç›®æ ‡ä»“ä½    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç¬¬äºŒå±‚: æ¿å—è½®åŠ¨ (åŒå‘¨è°ƒæ•´)                                    â”‚
â”‚   - 11ä¸ªæ¿å—ETFç›¸å¯¹å¼ºåº¦æ’å                                   â”‚
â”‚   - Offensive: Top 4 æ¿å— | Neutral: Top 3 | Defensive: Top 2 â”‚
â”‚   â†’ è¾“å‡º: å¼ºåŠ¿æ¿å—åˆ—è¡¨                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç¬¬ä¸‰å±‚: ä¸ªè‚¡ç²¾é€‰                                              â”‚
â”‚   - Offensive æ¨¡å¼: ä¼˜å…ˆç§‘æŠ€é¾™å¤´ (NVDA/META/GOOGL/AMZN...)    â”‚
â”‚   - æ¿å—å†…åŠ¨é‡æ’å + æŠ€æœ¯è¿‡æ»¤                                  â”‚
â”‚   â†’ è¾“å‡º: æ¯æ¿å— Top 2 ä¸ªè‚¡                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç›®å½•ç»“æ„

```
trader/
â”œâ”€â”€ ai_trader_assist/           # Python æ ¸å¿ƒåŒ…
â”‚   â”œâ”€â”€ backtest/               # å›æµ‹å¼•æ“
â”‚   â”œâ”€â”€ data_collector/         # æ•°æ®é‡‡é›† (yfinance, FRED, PostgreSQL)
â”‚   â”œâ”€â”€ decision_engine/        # å†³ç­–å¼•æ“
â”‚   â”œâ”€â”€ feature_engineering/    # ç‰¹å¾å·¥ç¨‹
â”‚   â”œâ”€â”€ llm/                    # LLM å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ llm_operators/          # LLM 5é˜¶æ®µç®—å­
â”‚   â”œâ”€â”€ portfolio_manager/      # æŒä»“ç®¡ç†
â”‚   â”œâ”€â”€ position_sizer/         # ä»“ä½è®¡ç®—
â”‚   â”œâ”€â”€ risk_engine/            # é£é™©å¼•æ“
â”‚   â”œâ”€â”€ universe/               # åŠ¨æ€é€‰è‚¡æ¨¡å—
â”‚   â””â”€â”€ jobs/                   # è°ƒåº¦è„šæœ¬
â”œâ”€â”€ configs/                    # é…ç½®æ–‡ä»¶
â”œâ”€â”€ scripts/                    # è¿è¡Œè„šæœ¬
â”‚   â”œâ”€â”€ run_backtest_v5.py      # V5 èåˆç­–ç•¥ (æ¨è)
â”‚   â”œâ”€â”€ run_backtest_v4.py      # V4 åˆ†å±‚å†³ç­–
â”‚   â”œâ”€â”€ run_backtest_v3.py      # V3 è¶‹åŠ¿è·Ÿè¸ª
â”‚   â””â”€â”€ load_news_data.py       # æ–°é—»æ•°æ®å¯¼å…¥
â”œâ”€â”€ storage/                    # æ•°æ®å­˜å‚¨
â”‚   â”œâ”€â”€ backtest_3y_v5/         # V5 å›æµ‹ç»“æœ
â”‚   â”œâ”€â”€ backtest_3y_v4/         # V4 å›æµ‹ç»“æœ
â”‚   â””â”€â”€ backtest_3y_v3/         # V3 å›æµ‹ç»“æœ
â”œâ”€â”€ tests/                      # æµ‹è¯•ç”¨ä¾‹
â”œâ”€â”€ .env.example                # ç¯å¢ƒå˜é‡æ¨¡æ¿
â””â”€â”€ requirements.txt            # Python ä¾èµ–
```

---

## ç­–ç•¥æ¼”è¿›

### ä» V1 åˆ° V5 çš„è¿­ä»£å†ç¨‹

| ç‰ˆæœ¬ | ç­–ç•¥åç§° | æ ¸å¿ƒæ€è·¯ | é—®é¢˜ |
|------|----------|----------|------|
| V1 | å‡å€¼å›å½’ | RSI è¶…å–ä¹°å…¥ï¼Œè¶…ä¹°å–å‡º | ç‰›å¸‚ä¸­é¢‘ç¹æ­¢ç›ˆï¼Œé”™å¤±å¤§è¡Œæƒ… |
| V2 | åŠ¨é‡ç­–ç•¥ | è¿½æ¶¨å¼ºåŠ¿è‚¡ | å›æ’¤è¾ƒå¤§ï¼Œéœ‡è¡å¸‚è¡¨ç°å·® |
| V3 | è¶‹åŠ¿è·Ÿè¸ª | SPY>SMA50 æ‰å¼€ä»“ï¼Œè·Ÿè¸ªæ­¢æŸ 15% | æ”¶ç›Šæœ€é«˜ä½†å›æ’¤åå¤§ |
| V4 | åˆ†å±‚å†³ç­– | å®è§‚â†’æ¿å—â†’ä¸ªè‚¡ä¸‰å±‚æ¡†æ¶ | è¿‡äºä¿å®ˆï¼Œä»“ä½åˆ©ç”¨ä¸è¶³ |
| **V5** | **èåˆç­–ç•¥** | **V3è¶‹åŠ¿è·Ÿè¸ª + V4åˆ†å±‚æ¡†æ¶** | **æœ€ä¼˜é£é™©è°ƒæ•´æ”¶ç›Š** |

### V5 æ ¸å¿ƒä¼˜åŒ–

1. **æ”¾å®½è¿›æ”»é˜ˆå€¼**: score â‰¥ 2 å³è¿›å…¥ Offensive (åŸéœ€ â‰¥ 3)
2. **å»¶é•¿æ¿å—å‘¨æœŸ**: å‘¨åº¦ â†’ åŒå‘¨ï¼Œå‡å°‘é¢‘ç¹è½®åŠ¨
3. **å®½æ¾æ­¢æŸ**: 15% â†’ 18%ï¼Œè®©åˆ©æ¶¦å¥”è·‘
4. **èšç„¦ç§‘æŠ€é¾™å¤´**: Offensive æ¨¡å¼ä¼˜å…ˆé…ç½® TECH_LEADERS

---

## å›æµ‹éªŒè¯

### ç­–ç•¥å¯¹æ¯” (2023-01 ~ 2026-01, 3å¹´)

| æŒ‡æ ‡ | V3 è¶‹åŠ¿è·Ÿè¸ª | V4 åˆ†å±‚å†³ç­– | **V5 èåˆç­–ç•¥** |
|------|-------------|-------------|-----------------|
| **æ€»æ”¶ç›Šç‡** | +117.02% | +40.65% | **+90.43%** |
| **å¹´åŒ–æ”¶ç›Š** | +29.05% | +11.88% | **+23.61%** |
| **Alpha** | +35.40% | -40.98% | **+8.80%** |
| **å¤æ™®æ¯”ç‡** | 1.32 | 0.89 | **1.43** âœ… |
| **æœ€å¤§å›æ’¤** | 16.10% | 13.69% | **12.56%** âœ… |
| **ç›ˆäºæ¯”** | - | - | **2.47** |
| **æ€»äº¤æ˜“** | - | - | 64 ç¬” |

### V5 å®è§‚çŠ¶æ€åˆ†å¸ƒ

| çŠ¶æ€ | æœˆä»½æ•° | å æ¯” | ç›®æ ‡ä»“ä½ |
|------|--------|------|----------|
| **Offensive** | 30 | 81% | 95% |
| **Neutral** | 5 | 14% | 70% |
| **Defensive** | 2 | 5% | 30% |

### V5 äº¤æ˜“æ¥æºåˆ†å¸ƒ

| æ¥æº | äº¤æ˜“æ•° | è¯´æ˜ |
|------|--------|------|
| **Tech Leader** | 14 ç¬” | ç§‘æŠ€é¾™å¤´ (NVDA, META, AMD...) |
| **Sector Rotation** | 21 ç¬” | æ¿å—è½®åŠ¨é€‰è‚¡ |

### æœ€å¤§ç›ˆåˆ©äº¤æ˜“

| æ—¥æœŸ | è‚¡ç¥¨ | æ¥æº | ç›ˆäº | æ”¶ç›Šç‡ |
|------|------|------|------|--------|
| 2023-09-21 | NVDA | Tech Leader | **+$15,477** | +95.9% |
| 2025-12-17 | AVGO | Sector Rotation | +$13,889 | +69.4% |
| 2025-03-13 | COST | Sector Rotation | +$11,193 | +81.4% |
| 2024-04-04 | AMD | Tech Leader | +$9,686 | +53.8% |

---

## é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡ (.env)

```bash
# PostgreSQL æ•°æ®åº“
PG_HOST=localhost
PG_PORT=5432
PG_DATABASE=trader
PG_USER=trader
PG_PASSWORD=your_password_here

# DeepSeek LLM
DEEPSEEK_API_KEY=your_api_key_here
DEEPSEEK_MODEL=deepseek-chat
DEEPSEEK_API_URL=https://api.deepseek.com/v1/chat/completions
DEEPSEEK_TIMEOUT=90
DEEPSEEK_MAX_TOKENS=8192

# FRED å®è§‚æ•°æ® (å¯é€‰)
FRED_API_KEY=your_fred_api_key_here

# æ—¶åŒº
TZ=America/Los_Angeles
```

### æ ¸å¿ƒé…ç½® (configs/base.json)

```json
{
  "universe": {
    "indices": ["SPY", "QQQ", "DIA", "IWM"],
    "sectors": ["XLK", "XLF", "XLV", "XLE", "XLY", "XLP", "XLI", "XLB", "XLU", "XLRE", "XLC"],
    "tech_leaders": ["NVDA", "META", "GOOGL", "AMZN", "MSFT", "AAPL", "AMD", "AVGO", "NFLX", "TSLA"]
  },
  "limits": {
    "max_exposure": 0.95,
    "max_single_weight": 0.20,
    "trailing_stop": 0.18
  }
}
```

---

## å¼€å‘æŒ‡å—

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest tests -q

# è¿è¡Œ V5 å›æµ‹
PYTHONPATH=. python scripts/run_backtest_v5.py
```

### ç­–ç•¥å‚æ•°è°ƒä¼˜

```python
# åœ¨ scripts/run_backtest_v5.py ä¸­è°ƒæ•´

# å®è§‚é˜ˆå€¼ (æ”¾å®½è¿›æ”»)
if score >= 2:  # å¯è°ƒæ•´ä¸º 1 æˆ– 3
    regime = "offensive"

# æ­¢æŸé˜ˆå€¼ (å®½æ¾æ­¢æŸ)
if drawdown > 0.18:  # å¯è°ƒæ•´ä¸º 0.15 æˆ– 0.20
    to_sell.append((sym, f"è·Ÿè¸ªæ­¢æŸ"))

# ç§‘æŠ€é¾™å¤´åˆ—è¡¨
TECH_LEADERS = ["NVDA", "META", "GOOGL", ...]
```

### æ·»åŠ æ–°æ¿å—

```python
# åœ¨ SECTOR_STOCKS ä¸­æ·»åŠ 
SECTOR_STOCKS = {
    "XLK": ["AAPL", "MSFT", ...],
    "NEW_SECTOR": ["STOCK1", "STOCK2", ...],
}
```

---

## å…è´£å£°æ˜

âš ï¸ **æœ¬é¡¹ç›®ä»…ç”¨äºç ”ç©¶ä¸æ•™å­¦ï¼Œä¸è¿æ¥ä»»ä½•åˆ¸å•†ç³»ç»Ÿï¼Œä¸æ„æˆæŠ•èµ„å»ºè®®ã€‚**

- å›æµ‹ç»“æœä¸ä»£è¡¨æœªæ¥æ”¶ç›Š
- å®ç›˜äº¤æ˜“éœ€è€ƒè™‘æ»‘ç‚¹ã€æ‰‹ç»­è´¹ã€æµåŠ¨æ€§ç­‰å› ç´ 
- è¯·åœ¨äººå·¥å¤æ ¸åæ‰§è¡Œæ‰€æœ‰äº¤æ˜“
- æŠ•èµ„æœ‰é£é™©ï¼Œå…¥å¸‚éœ€è°¨æ…

---

## å‚è€ƒèµ„æ–™

- [HKUDS/AI-Trader](https://github.com/HKUDS/AI-Trader) - æ¶æ„å‚è€ƒ
- [yfinance](https://github.com/ranaroussi/yfinance) - è¡Œæƒ…æ•°æ®
- [FRED API](https://fred.stlouisfed.org/docs/api/fred/) - å®è§‚æ•°æ®
- [PostgreSQL 18](https://www.postgresql.org/docs/18/) - æ•°æ®åº“

---

*Built with Python. Powered by Data. Guided by Discipline.*
