---
name: stock-analysis
description: 深入分析个股技术指标、趋势和新闻，给出操作建议。触发词：分析 NVDA、AAPL 怎么样、stock analysis、个股分析
license: MIT
compatibility: opencode
metadata:
  category: trading
  workflow: stock-research
---

# Stock Analysis Skill

深入分析个股的技术指标、价格趋势和相关新闻，给出操作建议。

## 触发条件

- 用户指定股票代码请求分析
- 用户询问某只股票的情况
- 每日盘前分析流程的第三步

## 执行步骤

### 1. 获取股票数据

对于指定的股票 `{SYMBOL}`：

```
1. get_price("{SYMBOL}") - 当前价格
2. get_history("{SYMBOL}", days=60) - 历史数据
3. calc_indicators("{SYMBOL}", ["rsi", "macd", "atr", "sma_50", "sma_200", "zscore"])
4. get_news("{SYMBOL}", max_items=5) - 相关新闻
5. get_quotes(["{SYMBOL}"]) - 盘前/盘后报价
```

### 2. 技术分析

#### 趋势判断

| 条件 | 趋势状态 |
|------|----------|
| 价格 > SMA50 > SMA200 | 强势上涨 |
| 价格 > SMA50, < SMA200 | 反弹中 |
| 价格 < SMA50 > SMA200 | 回调中 |
| 价格 < SMA50 < SMA200 | 弱势下跌 |

#### 动量信号

| RSI | MACD | 信号 |
|-----|------|------|
| > 70 | 看多 | 强势但超买 |
| > 50 | 看多 | 健康上涨 |
| < 50 | 看空 | 动量减弱 |
| < 30 | 看空 | 超卖反弹机会 |

#### 波动性评估

| ATR% | 波动等级 | 说明 |
|------|----------|------|
| > 4% | 高波动 | 需更宽止损 |
| 2-4% | 中等 | 正常 |
| < 2% | 低波动 | 可考虑期权 |

### 3. 综合评分

综合以下因素给出 0-100 分：

- 趋势强度 (25%)
- 动量信号 (25%)
- 相对强度 (20%)
- 新闻情绪 (15%)
- 成交量 (15%)

### 4. 操作建议

| 评分 | 建议 | 说明 |
|------|------|------|
| 80+ | BUY | 强烈看多 |
| 60-80 | HOLD/加仓 | 持有或逢低加仓 |
| 40-60 | HOLD | 观望 |
| 20-40 | REDUCE | 考虑减仓 |
| < 20 | AVOID | 回避 |

### 5. 输出格式

```markdown
## {SYMBOL} 个股分析

**当前价格**: $XXX.XX
**日期**: YYYY-MM-DD

### 技术指标

| 指标 | 数值 | 解读 |
|------|------|------|
| RSI(14) | XX | 超买/中性/超卖 |
| MACD | X.XX | 看多/看空 |
| ATR% | X.X% | 高/中/低波动 |
| vs SMA50 | +X.X% | 在均线上方/下方 |
| vs SMA200 | +X.X% | 长期趋势 |

### 趋势状态

- **短期趋势**: 上涨/下跌/盘整
- **中期趋势**: 上涨/下跌/盘整
- **趋势强度**: 强/中/弱

### 新闻情绪

**情绪分数**: X.XX (正面/中性/负面)

- [新闻标题1] - [来源]
- [新闻标题2] - [来源]

### 综合评估

**评分**: XX/100
**操作建议**: BUY/HOLD/REDUCE/AVOID
**理由**: [简要说明]

### 关键价位

| 价位 | 说明 |
|------|------|
| $XXX | 阻力位 |
| $XXX | 支撑位 |
| $XXX | 止损参考 |
```

## 批量分析

如需分析多只股票，使用：

```
score_stocks(["NVDA", "AAPL", "MSFT", ...])
```

返回按评分排序的列表。

## 后续步骤

分析完成后：
1. `/position-sizing` - 计算仓位
2. `/record-operation` - 记录操作
